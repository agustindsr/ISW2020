<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="style.css" />
    <title>Intersection Observer</title>
  </head>


  <body>
    <section id="section1">
      <div class="contenedor">
        <h2>Section 1 Lorem ipsum dolor sit amet elit. Dolorem, enim.</h2>
        <h3>Lorem ipsum dolor sit amet.</h3>
        <p>
          Lorem ipsum dolor sit, amet consectetur adipisicing elit. Deleniti,
          sit cum aliquid, eveniet maxime, facere consequatur ex velit autem
          delectus necessitatibus quibusdam iusto error nihil cupiditate eos
          eius dignissimos animi. Cum a est nobis sapiente, obcaecati saepe,
          accusantium nulla explicabo doloremque nisi voluptas placeat
          aspernatur. Reprehenderit molestias eius esse repudiandae quibusdam
          eveniet, voluptate recusandae odio suscipit quos amet nam ex totam
          cupiditate nemo ab quo consequuntur vitae. Tempore, vitae! Veniam,
          esse unde? Voluptates iste officiis quis dolor natus sapiente alias
          nihil, maiores ipsum minima iusto distinctio voluptatibus impedit
          cumque? Autem, eum! Est accusamus voluptate, adipisci animi commodi
          provident? Quam, ex.
        </p>
        <a href="">Read more</a>
        <a onClick="section2()">⬇️</a>
      </div>
    </section>

    <section id="section2">
      <div class="contenedor">
        <h2>Section 2 Lorem ipsum dolor sit amet elit. Dolorem, enim.</h2>
        <h3>Lorem ipsum dolor sit amet.</h3>
        <p>
          Lorem ipsum dolor sit, amet consectetur adipisicing elit. Deleniti,
          sit cum aliquid, eveniet maxime, facere consequatur ex velit autem
          delectus necessitatibus quibusdam iusto error nihil cupiditate eos
          eius dignissimos animi. Cum a est nobis sapiente, obcaecati saepe,
          accusantium nulla explicabo doloremque nisi voluptas placeat
          aspernatur. Reprehenderit molestias eius esse repudiandae quibusdam
          eveniet, voluptate recusandae odio suscipit quos amet nam ex totam
          cupiditate nemo ab quo consequuntur vitae. Tempore, vitae! Veniam,
          esse unde? Voluptates iste officiis quis dolor natus sapiente alias
          nihil, maiores ipsum minima iusto distinctio voluptatibus impedit
          cumque? Autem, eum! Est accusamus voluptate, adipisci animi commodi
          provident? Quam, ex.
        </p>
        <a href="">Read more</a>
        <a onClick="section3()">⬇️</a>
        <a onClick="section1()">⤴️</a>

      </div>
    </section>

    <section id="section3">
      <div id="final" class="contenedor">
        <h2>Section 3 Lorem ipsum dolor sit amet elit. Dolorem, enim.</h2>
        <h3>Lorem ipsum dolor sit amet.</h3>
        <p>
          Lorem ipsum dolor sit, amet consectetur adipisicing elit. Deleniti,
          sit cum aliquid, eveniet maxime, facere consequatur ex velit autem
          delectus necessitatibus quibusdam iusto error nihil cupiditate eos
          eius dignissimos animi. Cum a est nobis sapiente, obcaecati saepe,
          accusantium nulla explicabo doloremque nisi voluptas placeat
          aspernatur. Reprehenderit molestias eius esse repudiandae quibusdam
          eveniet, voluptate recusandae odio suscipit quos amet nam ex totam
          cupiditate nemo ab quo consequuntur vitae. Tempore, vitae! Veniam,
          esse unde? Voluptates iste officiis quis dolor natus sapiente alias
          nihil, maiores ipsum minima iusto distinctio voluptatibus impedit
          cumque? Autem, eum! Est accusamus voluptate, adipisci animi commodi
          provident? Quam, ex.
        </p>
        <a href="">Read more</a>
        <a onClick="section2()">⤴️</a>

      </div>
    </section>

    <script>
        function section1(){
            const $element = document.querySelector('#section1');
            $element.scrollIntoView({ behavior: 'smooth'})
        }
        function section2(){
            const $element = document.querySelector('#section2');
            $element.scrollIntoView({ behavior: 'smooth'})
        }
        function section3(){
            const $element = document.querySelector('#section3');
            $element.scrollIntoView({ behavior: 'smooth'})
        }
      const callback = (entries, options) => {
        entries.forEach((item) => {
          if (item.isIntersecting) {
          
              item.target.setAttribute("data-target", "in");
           
          } 
          else {
            item.target.setAttribute("data-target", "out");
          }
        });
      };
      const options = {
        root: null,
        rootMargin: "0px",
        threshold: 1,
      };
      const $h2 = document.querySelectorAll(".contenedor h2");
      const $h3 = document.querySelectorAll(".contenedor h3");
      const $p = document.querySelectorAll(".contenedor p");
      const $a = document.querySelectorAll(".contenedor a");
      const $section = document.querySelectorAll("section");

      const observer = new IntersectionObserver(callback, options);
      $h2.forEach((item) => observer.observe(item));
      $h3.forEach((item) => observer.observe(item));
      $p.forEach((item) => observer.observe(item));
      $a.forEach((item) => observer.observe(item));


      const optionsSection = {
        root: null,
        rootMargin: "0px",
        threshold: .5,
      };
      function goto(element){
        element.scrollIntoView({behavior: 'smooth'});
        console.log('se llamo con',element)
      }
      const callbackSection = (entries, options) =>{
        entries.forEach((item) => {
          if (item.isIntersecting) {
          
              item.target.setAttribute("data-target", "in");
              console.log(item.target)
            //   goto(item.target);
          } 
          else {
            item.target.setAttribute("data-target", "out");
          };
        })
      }
       
      const observerSection = new IntersectionObserver(callbackSection, optionsSection);
      $section.forEach((item) => observerSection.observe(item));

    </script>
  </body>
</html>
